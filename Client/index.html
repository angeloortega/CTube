<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<html>
  <head>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>FMSTube </title>
    <link rel="stylesheet" href="styles/styles.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <style> 
      .bg-1{
        color: rgb(4, 6, 131);
        font: large;
      }  
      
      * {box-sizing:border-box}
      /* Slideshow container */
      .slideshow-container {
      max-width: 1000px;
      position: relative;
      margin: auto;
      }

      /* Hide the images by default */
      .mySlides {
      display: none;
      }

      /* Next & previous buttons */
      .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      width: auto;
      margin-top: -22px;
      padding: 16px;
      color: white;
      font-weight: bold;
      font-size: 18px;
      transition: 0.6s ease;
      border-radius: 0 3px 3px 0;
      user-select: none;
      }

      .prev {
      left: 0;
      }
      /* Position the "next button" to the right */
      .next {
      right: 0;
      border-radius: 3px 0 0 3px;
      }

      /* On hover, add a black background color with a little bit see-through */
      .prev:hover, .next:hover {
      background-color: white;
      }

      /* Caption text */
      .text {
      color: #000;
      font-size: 15px;
      padding: 8px 12px;
      position: relative;
      bottom: 8px;
      width: 100%;
      text-align: center;
      }

      /* Number text (1/3 etc) */
      .numbertext {
      color: #f2f2f2;
      font-size: 12px;
      padding: 8px 12px;
      position: absolute;
      top: 0;
      }

      /* The dots/bullets/indicators */
      .dot {
      cursor: pointer;
      height: 15px;
      width: 15px;
      margin: 0 2px;
      background-color: #bbb;
      border-radius: 50%;
      display: inline-block;
      transition: background-color 0.6s ease;
      }

      .active, .dot:hover {
      background-color: #717171;
      }  
    </style>
    
  </head>
  <body>
    <div style="text-align: left; font-size: 5vw; font-family:Georgia, 'Times New Roman', Times, serif;">
      Bienvenido a FMSTube
    </div>
    <div> 
      <img style="margin-left: -50vw;" width=20% height=60% src="logo.png" type="png">
    </div>   
    
    <div style="font-size: 3vw ; background-color:cadetblue; font-family:Georgia, 'Times New Roman', Times, serif; font-style: italic; color:black">
      SlideShow
    </div>

    <div class="slideshow-container">

      <div id="slide"></div>
        <!-- Full-width images with number and caption text -->
        
      
        <!-- Next and previous buttons -->
        <a class="prev" style="color:white;" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" style="color:white;" onclick="plusSlides(1)">&#10095;</a>
      </div>
      <br>
      
      <!-- The dots/circles -->
      <div id="lowButtons" style="text-align:center" >
      </div>

    <br>
    <div style="font-size: 3vw ; background-color: crimson; font-family:Georgia, 'Times New Roman', Times, serif; font-style: italic; color:black">
      Galeria de Videos
    </div>

    <nav class="navbar navbar-default" style="background-color:#333;">
        <div class="container-fluid">
          <div class="navbar-header">
            <li onclick="goHome()">
            <a class="navbar-brand container text-center" style="color: white; font-size: 3vw;" href="#"><b>Home</b></a>
            </li>
          </div>
          <ul class="nav navbar-nav">
            <li class="dropdown" ><a class="dropdown-toggle" data-toggle="dropdown" href="#" style="color: white; font-size: 3vw;">Categorias</a>
              <ul class="dropdown-menu" style="font-size: 3vw; background-color: #333;">
                <li onclick="cambiarCategoria('Red Bull')"><a id="fmsARG" href="#" style="color: white;" onmouseover="chgBack('gray', 'fmsARG')" onmouseout="chgBack('#333', 'fmsARG')">Red Bull</a></li>
                <li onclick="cambiarCategoria('FMS España')"><a id="fmsESP" href="#" style="color: white;" onmouseover="chgBack('gray', 'fmsESP')" onmouseout="chgBack('#333', 'fmsESP')">FMS España</a></li>
                <li onclick="cambiarCategoria('FMS Internacional')"><a id="fmsINT" href="#" style="color: white;" onmouseover="chgBack('gray' , 'fmsINT')" onmouseout="chgBack('#333' , 'fmsINT')">FMS Internacional</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>

    <ul class="list-group-mb" id='jsonVideos' width=100% ></ul>

   

  <script>
      //document.getElementById('videoName').innerHTML = "Top 10 rimas fms arg";

      /*var family = [
          {
             description: 'Este video muestra el torneo Colombia',
             titulo: "Colombia 2019 GD"
          },
          {
              description: 'Este video muestra el torneo Colombia',
              titulo: "Colombia 2019 GD"
          },
          {
              description: 'Este video muestra el torneo Colombia',
              titulo: "Colombia 2019 GD"
          }
      ];*/
      
      /*
         
      for (var i = 0; i < family.length; i ++ ){
          document.getElementById('listedVideos').innerHTML += '<li class="list-group-item"> Titulo del Video: '+ family[i].titulo +'</li><li class="list-group-item"> Descripcion del video: '+ family[i].description+'</li>'+
          '<li class="list-group-item"> <h2>Video: </h2><video width=50% height=50% controls> <source src="Colombia2019.mp4" type="video/mp4">'+
          'Your browser does not support the video tag.'+
          '</video></li>';
      }*/
      //CODIGO PARA MOSTRAR SLIDESHOW
      var slideIndex = 1;
      loadButtons();
      loadSlides();
      showSlides(slideIndex);
      
      function loadSlides(){
        var myJson = JSON.parse(localStorage.getItem("jsonActual"));
        //console.log(myJson);
        var deploySlides = "";
        var totalSlides = Object.keys(myJson).length;
        var actualSlide = 1;
        myJson.forEach(element => {
            deploySlides += '<div class="mySlides">'+
            '<div class="numbertext">'+actualSlide+' / '+totalSlides+'</div>'+
            '<img src="'+element.poster+'" style="width:100vw; height: 60vw;">'+
            '<div class="text">'+element.title+'</div>'+
            '<div class="text">'+element.description+'</div>'+
            '</div>';
        });
        console.log(deploySlides)
        document.getElementById('slide').innerHTML = deploySlides;
      }
      
      function loadButtons(){
        var myJson = JSON.parse(localStorage.getItem("jsonActual"));
        //console.log(myJson);
        var deployButtons = "";
        var contador =1
        myJson.forEach(element => {
            deployButtons += '<span class="dot" onclick="currentSlide('+contador+')"></span>';
            contador++;
        });
        console.log(deployButtons)
        document.getElementById('lowButtons').innerHTML = deployButtons;
      }
      // Next/previous controls
      function plusSlides(n) {
        showSlides(slideIndex += n);
      }

      // Thumbnail image controls
      function currentSlide(n) {
        showSlides(slideIndex = n);
      }

      function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > slides.length) {slideIndex = 1} 
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none"; 
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block"; 
        dots[slideIndex-1].className += " active";
      } 
      /*function loadSlides(){
        var myJson = JSON.parse(localStorage.getItem("jsonActual"));
        console.log(myJson);
        var deploySlides = '<div class="slideshow-container" style="max-width: 1000px; position: relative; margin: auto;">';
        var totalSlides = Object.keys(myJson).length;
        var actualSlide = 1;
        myJson.forEach(element => {
          deploySlides += '<div class="mySlides" style="display: none; -webkit-animation-name: fade; -webkit-animation-duration: 1.5s; animation-name: fade; animation-duration: 1.5s;">'+
          '<div style="color: #f2f2f2; font-size: 12px; padding: 8px 12px; position: absolute; top: 0;">'+actualSlide+'/'+totalSlides+'</div>'+
          '<img src="'+element.poster+'" type="png" style="width:100vw; height:60vw;">'+
          '<div style="color: #000; font-size: 5vw; padding: 0vw; position: relative; bottom: 8px; width: 100%; text-align: center;">'+element.title+'</div>'+
          '<div style="color: #000; font-size: 5vw; padding: 0vw 12px; position: relative; bottom: 8px; width: 100%; text-align: center;">'+element.description+'</div>';
        });
        deploySlides += '<a style="cursor: pointer; left: 0;" onclick="plusSlides(-1)">AAY</a>'+
        '<a style="cursor: pointer; margin-top: 0px; padding: 16px; color: black; font-weight: bold; font-size: 18px; transition: 1.6s ease; border-radius: 0 3px 3px 0; user-select: none; right: 0; border-radius: 3px 0 0 3px;" onclick="plusSlides(1)">PUTA</a>'+
        '</div>';
        
        deploySlides +='<div style="text-align:center">';
        for (i = 1; i <= totalSlides; i++) { 
          deploySlides += '<span class="dot" style="cursor: pointer; height: 15px; width: 15px; margin: 0 2px; background-color: #bbb; border-radius: 50%; display: inline-block; transition: background-color 0.6s ease;" onclick="currentSlide('+i+')"></span>';
        } 
        deploySlides += '</div>';
        document.getElementById('slide').innerHTML = deploySlides;
        console.log(deploySlides);
      }*/
 
     //--------------------------------------------------------------------------------------------------------------------------------------
      function mostrarVideo(title){
        var myJson = JSON.parse(localStorage.getItem("jsonActual"));
        //console.log(myJson);
        var deployVideos = "";
        myJson.forEach(element => {
          if (element.title == title){
            deployVideos += '<li class="list-group-item" style="font-size: 3vw"> Titulo del Video: '+ element.title +'</li><li class="list-group-item" style="font-size: 3vw"> Descripcion del video: '+ element.description+'</li>'+
            '<li class="list-group-item" style="font-size: 3vw"> Bytes del video: '+element.size+'KB </li> '+'<li class="list-group-item" style="font-size: 3vw"> Fecha del video: '+element.creationDate+'</li> '+
            '<li class="list-group-item" style="font-size: 4vw"> <h4> Poster: </h4><video width=50% height=50% controls> <source src="'+element.url +'" type="video/mp4"></source></video> </li>';
          }
          //<video width=50% height=50% controls> <source src="'+element.url +'" type="video/mp4">
          //<img style="margin-left: -50vw;" width=20% height=60% src="logo.png" type="png">
        });
        document.getElementById('jsonVideos').innerHTML = deployVideos;
      }


      function chgBack(colorParam, id){
        document.getElementById(id).style.backgroundColor = colorParam;
      }
      
      function cambiarCategoria(categoria){
        var myJson = JSON.parse(localStorage.getItem("jsonActual"));
        //console.log(myJson);
        var deployVideos = "";
        myJson.forEach(element => {
          if (element.category == categoria){
            deployVideos += '<li class="list-group-item" style="font-size: 3vw"> Titulo del Video: '+ element.title +'</li><li class="list-group-item" style="font-size: 3vw"> Descripcion del video: '+ element.description+'</li>'+
            '<li class="list-group-item" style="font-size: 3vw"> Bytes del video: '+element.size+'KB </li> '+'<li class="list-group-item" style="font-size: 3vw"> Fecha del video: '+element.creationDate+'</li> '+
            '<li onclick="mostrarVideo(\''+element.title+'\')" class="list-group-item" style="font-size: 4vw"> <h4> Poster: </h4><img src="'+element.poster+'" width=50% height=50%>'+'</li>';
          }
          //<video width=50% height=50% controls> <source src="'+element.url +'" type="video/mp4">
          //<img style="margin-left: -50vw;" width=20% height=60% src="logo.png" type="png">
        });
        document.getElementById('jsonVideos').innerHTML = deployVideos;
      }

      function goHome(){
        fetch('videos.json')
      .then(function(response) {
        return response.json();
      })
      .then(function(myJson) {
        var stringedJson = JSON.stringify(myJson);
        localStorage.setItem("jsonActual", stringedJson);
        //console.log(myJson);
        var deployVideos = "";
        
        myJson.forEach(element => {
          deployVideos += '<li class="list-group-item" style="font-size: 3vw"> Titulo del Video: '+ element.title +'</li><li class="list-group-item" style="font-size: 3vw"> Descripcion del video: '+ element.description+'</li>'+
          '<li class="list-group-item" style="font-size: 3vw"> Bytes del video: '+element.size+'KB </li> '+'<li class="list-group-item" style="font-size: 3vw"> Fecha del video: '+element.creationDate+'</li> '+
          '<li onclick="mostrarVideo(\''+element.title+'\')" class="list-group-item" style="font-size: 4vw"> <h4> Poster: </h4><img src="'+element.poster+'" width=50% height=50%>'+'</li>';
        });
            //<video width=50% height=50% controls> <source src="'+element.url +'" type="video/mp4">

        document.getElementById('jsonVideos').innerHTML = deployVideos;
        //console.log(deployVideos)
      });
      }


      fetch('videos.json')
      .then(function(response) {
        return response.json();
      })
      .then(function(myJson) {
        var stringedJson = JSON.stringify(myJson);
        localStorage.setItem("jsonActual", stringedJson);
        //console.log(myJson);
        var deployVideos = "";
        
        myJson.forEach(element => {
          deployVideos += '<li class="list-group-item" style="font-size: 3vw"> Titulo del Video: '+ element.title +'</li><li class="list-group-item" style="font-size: 3vw"> Descripcion del video: '+ element.description+'</li>'+
          '<li class="list-group-item" style="font-size: 3vw"> Bytes del video: '+element.size+'KB </li> '+'<li class="list-group-item" style="font-size: 3vw"> Fecha del video: '+element.creationDate+'</li> '+
          '<li onclick="mostrarVideo(\''+element.title+'\')" class="list-group-item" style="font-size: 4vw"> <h4> Poster: </h4><img src="'+element.poster+'" width=50% height=50%>'+'</li>';
        });
          //<video width=50% height=50% controls> <source src="'+element.url +'" type="video/mp4">

        document.getElementById('jsonVideos').innerHTML = deployVideos;
        //console.log(deployVideos)
      });
      </script> 
  </body>
</html>